{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport PaisDAO from \"../db/PaisDao\";\nexport var PaisService = function () {\n  function PaisService() {\n    _classCallCheck(this, PaisService);\n  }\n\n  _createClass(PaisService, null, [{\n    key: \"Obter\",\n    value: function Obter() {\n      var response, paises;\n      return _regeneratorRuntime.async(function Obter$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(fetch('https://servicodados.ibge.gov.br/api/v1/paises'));\n\n            case 2:\n              response = _context.sent;\n\n              if (response.ok) {\n                _context.next = 5;\n                break;\n              }\n\n              throw new Error(\"Ocorreu um erro \" + response.status + \" ao obter os paises.\");\n\n            case 5:\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(response.json());\n\n            case 7:\n              paises = _context.sent;\n              _context.next = 10;\n              return _regeneratorRuntime.awrap(PaisDAO.Insert(paises));\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }]);\n\n  return PaisService;\n}();","map":{"version":3,"names":["PaisDAO","PaisService","fetch","response","ok","Error","status","json","paises","Insert"],"sources":["D:/Projects/Aula/LocalityMap/Services/pais.js"],"sourcesContent":["import PaisDAO from '../db/PaisDao'\r\n\r\nexport class PaisService {\r\n  static async Obter () {\r\n    //  Consulta paises no IBGE\r\n    const response = await fetch('https://servicodados.ibge.gov.br/api/v1/paises')\r\n\r\n    // Valida response\r\n    if (!response.ok) {\r\n      throw new Error(`Ocorreu um erro ${response.status} ao obter os paises.`)\r\n    }\r\n\r\n    // Deserializa json\r\n    const paises = await response.json()\r\n\r\n    // Salva no db\r\n    await PaisDAO.Insert(paises)\r\n  }\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,OAAP;AAEA,WAAaC,WAAb;EAAA;IAAA;EAAA;;EAAA;IAAA;IAAA,OACE;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,iCAEyBC,KAAK,CAAC,gDAAD,CAF9B;;YAAA;cAEQC,QAFR;;cAAA,IAKOA,QAAQ,CAACC,EALhB;gBAAA;gBAAA;cAAA;;cAAA,MAMU,IAAIC,KAAJ,sBAA6BF,QAAQ,CAACG,MAAtC,0BANV;;YAAA;cAAA;cAAA,iCAUuBH,QAAQ,CAACI,IAAT,EAVvB;;YAAA;cAUQC,MAVR;cAAA;cAAA,iCAaQR,OAAO,CAACS,MAAR,CAAeD,MAAf,CAbR;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EADF;;EAAA;AAAA"},"metadata":{},"sourceType":"module"}